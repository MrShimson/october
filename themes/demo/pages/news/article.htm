url = "/news/article/:slug/:id"
layout = "default"
title = "Новость"
meta_title = "Свято-Димитриевский детский центр | {{ blog.title }}"

[section post]
handle = "Blog\Post"
identifier = "id"

[collection blogCategories]
handle = "Blog\Category"

[resources]
vars[activeNavLink] = "blog"
==
{% if post is empty %}
{% do abort(404) %}
{% elseif post.slug and post.slug != this.param.slug %}
{% do redirect(''|page({ slug: post.slug }), 301) %}
{% endif %}

<style>
    .card.card-post.card-primary {
        background-color: #fff8e7;
        border-radius: 16px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        border: none;
        padding: 3rem;
        max-width: 960px;
        margin: 0 auto;
        font-size: 16px;
        opacity: 0;
        transform: translateY(20px);
        animation: fadeIn 0.6s ease-out forwards;
        color: rgb(1, 175, 171); /* основной цвет текста */
    }

    @keyframes fadeIn {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .card-title {
        font-size: clamp(1.8rem, 2vw, 2.4rem);
        font-weight: 700;
        color: rgb(253, 140, 66); /* цвет заголовка */
        margin-bottom: 1.5rem;
        text-align: center;
    }

    .card-body.card-lg {
        padding: 0;
    }

    .card-meta {
        display: flex;
        justify-content: flex-end;
        margin-top: 4rem;
    }

    .card-meta .meta-item {
        font-size: 0.95rem;
        color: #777;
    }

    .blog-post-gallery {
        margin: 2rem 1.5rem 0;
    }

    @media (max-width: 768px) {
        .card.card-post.card-primary {
            padding: 1.5rem 1rem;
            border-radius: 12px;
        }

        .card-meta {
            justify-content: center;
        }

        .blog-post-gallery {
            margin: 2rem 0 2rem;
        }
    }
</style>

<div class="container py-4">
    <article class="card card-post card-primary">
        <div class="card-body card-lg">
            <h1 class="card-title">
                {{ post.title }}
            </h1>

            {% if post.entry_type == 'markdown_post' %}
            {{ post.content|md|content }}
            {% else %}
            {{ post.content|content }}
            {% endif %}
        </div>

        <div class="blog-post-gallery">
            {% partial 'controls/gallery-slider' gallery=post.gallery %}
        </div>

        <div class="card-meta">
            <div class="meta-item text-icon text-icon-date">
                {{ post.published_at_date|date('d-m-Y') }}
            </div>
        </div>
    </article>
</div>
